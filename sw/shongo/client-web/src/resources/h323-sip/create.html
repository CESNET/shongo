<script type="text/javascript">
    $(function() {
        [% util.tooltip('inputName', resources.tooltip.reservation.name) %]
        $("#inputStart").datetimepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'yy-mm-dd',
            timeFormat: 'HH:mm',
            separator: 'T'
        });
        $("#inputPeriodicityEnd").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'yy-mm-dd'
        });
    });
</script>
<h1>New reservation request for H.323/SIP room capacity</h1>
<form class="form-horizontal" action="[% location %]/create?[% "alias=" _ get.alias _ "&" IF get.alias %]confirmed" method="POST">

    <div class="control-group">
        <label class="control-label" for="inputName">Name:</label>
        <div class="controls">
            <input id="inputName" name="name" type="text" value="[% name %]"/>
            [% error.name %]
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="selectPurpose">Purpose:</label>
        <div class="controls">
            <select id="selectPurpose" name="purpose">
                <option value="SCIENCE" [% IF purpose == 'SCIENCE' %]selected[% END %]>Science</option>
                <option value="EDUCATION" [% IF purpose == 'EDUCATION' %]selected[% END %]>Education</option>
            </select>
            [% error.purpose %]
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="inputStart">Start date/time:</label>
        <div class="controls">
            <input id="inputStart" name="start" type="text" value="[% start %]"/>
            [% error.start %]
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="inputDuration">Duration:</label>
        <div class="controls">
            <input id="inputDuration" name="durationCount" type="text" value="[% durationCount %]" size="7"/>
            <select name="durationType">
                <option value="minute" [% IF durationType == 'minute' %]selected[% END %]>Minutes</option>
                <option value="hour" [% IF durationType == 'hour' %]selected[% END %]>Hours</option>
                <option value="day" [% IF durationType == 'day' %]selected[% END %]>Days</option>
            </select>
            [% error.durationCount %]
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">Periodicity:</label>
        <div class="controls">
            <label class="radio inline" for="periodicity-none">
                <input id="periodicity-none" name="periodicity" type="radio" value="none" [% IF !periodicity || periodicity == 'none' %]checked[% END %]/>
                none
            </label>
            <label class="radio inline" for="periodicity-daily">
                <input id="periodicity-daily" name="periodicity" type="radio" value="daily" [% IF periodicity == 'daily' %]checked[% END %]/>
                daily
            </label>
            <label class="radio inline" for="periodicity-weekly">
                <input id="periodicity-weekly" name="periodicity" type="radio" value="weekly" [% IF periodicity == 'weekly' %]checked[% END %]/>
                weekly
            </label>
            &nbsp;
            <div class="input-prepend">
                <span class="add-on">until</span>
                <input id="inputPeriodicityEnd" name="periodicityEnd" type="text" value="[% periodicityEnd %]"/>
            </div>
            [% error.periodicityEnd %]
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="selectAlias">H.323/SIP Alias:</label>
        <div class="controls">
            <select id="selectAlias" name="alias" [% "disabled" IF get.alias %]>
                <option value="none">&lt;Ad-Hoc Alias&gt;</option>
                [%- FOREACH aliasReservation IN aliasReservations %]
                <option value="[% aliasReservation.id %]" [% "selected" IF aliasReservation.id == get.alias || aliasReservation.id == alias %]>[% aliasReservation.value %] ([% aliasReservation.id %])</option>
                [% END %]
            </select>
            [% IF !get.alias %]<a class="btn" href="[% location %]/create-alias">Create new Alias</a>[% END %]
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="inputParticipantCount">Number of participants:</label>
        <div class="controls">
            <input id="inputParticipantCount" name="participantCount" type="text" value="[% participantCount %]" size="7"/>
            [% error.participantCount %]
        </div>
    </div>

    <div class="control-group">
        <label class="control-label" for="inputPin">PIN:</label>
        <div class="controls">
            <input id="inputPin" name="pin" type="text" value="[% pin %]"/>
            [% error.pin %]
        </div>
    </div>

    <div class="control-group">
        <div class="controls">
            <input class="btn btn-primary" type="submit" value="Create"/>
            <a class="btn" href="[% location %]/list">Cancel</a>
        </div>
    </div>

</form>