digraph {
  concentrate=true;
  node [shape=record]

  mcu1 mcu2
  
  subgraph cluster {
    endpoint3 -> mcu3 -> endpoint3
    endpoint4 -> mcu3 -> endpoint4
    gate
    gate -> mcu3 -> gate [constraint=false]
  }

  gate -> mcu2 -> gate [constraint=false]
  gate -> mcu1 -> gate [constraint=false]

  mcu1 -> mcu2 -> mcu1 [constraint=false]
  endpoint1 -> mcu1 -> endpoint1
  endpoint1 -> mcu2 -> endpoint1 [constraint=false]
  endpoint2 -> mcu1 -> endpoint2
  endpoint2 -> mcu2 -> endpoint2 [constraint=false]
}
